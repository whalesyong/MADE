_target_: made.agents.scorers.LLMScorer

# LLM backend configuration (mirrors planner config)
llm_config:
  # Change this string to swap scorer models served by vLLM.
  model: openai/Qwen/Qwen3-30B-A3B-Instruct-2507-FP8
  base_url: http://127.0.0.1:8000/v1
  api_key_env: VLLM_API_KEY
  max_output_tokens: null
  temperature: null
  cache: false
  extra_kwargs: {}
  trace_outputs: true         # enable JSONL tracing
  trace_inputs: false         # set true if you also want input metadata
  trace_file: null            # null => ./llm_traces.jsonl or $MADE_LLM_TRACE_PATH


# Context window management - random sample if exceeded
max_candidates: 50  # Max candidates to show LLM (null = no limit)
max_context_entries: 20  # Max history entries to show LLM (null = no limit)

# How to summarize the state for the LLM selector
context_config:
  objective_prompt: |
    You are selecting one candidate structure to evaluate in a material discovery experiment next.
    
    OBJECTIVE: Find as many NOVEL, UNIQUE, STABLE (or metastable) structures as possible. Choose the best candidate structure index from the list of candidates.
    - Structures with e_above_hull <= stability_tolerance are stable/metastable.
    - NOVEL: Not already known on the convex hull (is_newly_discovered=True).
    - UNIQUE: Structurally distinct from previously evaluated structures.
    - Entries marked [STABLE, NOVEL] or is_stable_or_metastable=True with is_newly_discovered=True are successful discoveries.
    
    IMPORTANT:
    - Multiple different structures can exist as stable/metastable polymorphs at the same composition
    - One unstable structure for a composition does NOT mean all structures for that composition are unstable.
    - Balance exploration (diverse structures) vs exploitation (unique structures similar to previously successful structures).
    
    
  include_structure_info: true
  include_composition_counter: true
  include_recent_trial: true
  previous_observations: 1 
